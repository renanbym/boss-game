<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>Sin Dragon</title>

    <style>
        body {
            background: #262626;
            overflow: hidden;
        }

        canvas {
            border: solid 0.5px rgb(33, 33, 33);
            display: block;
            margin: 0 auto;
        }
    </style>

    <script src="grid.js"></script>
    <script src="findPath.js"></script>
    <script src="Teclado.js"></script>
    <script src="Background.js"></script>
    <script src="Personagem.js"></script>
    <script src="Vilao.js"></script>
</head>

<body>

    <canvas width="1000" height="1000" id="container"></canvas>

    <script>
        const canvas = document.getElementById('container')
        const context = canvas.getContext('2d', { stencil: true, preserveDrawingBuffer: false })

        const PIXEL = 40;


        const BG = new Background({ canvas, context, MAP, images: ['img/bgs.png', 'img/walls.png'], PIXEL })
        const Gunslinger = new Personagem({ x: 0, y: 1, width: 49, height: 48, context, image: 'img/actor.png', PIXEL })
        const Villain = new Personagem({ x: 2, y: 15, width: 49, height: 48, WORLD: WORLD_INVERT, velocity: 300, context, image: 'img/Villager1.png', walkingTo: Gunslinger, villain: true })

        const animacoes = [
            Gunslinger,
            Villain,
        ]

        const render = () => {

            BG.render()

            animacoes.map((animacao, idx) => {
                animacao.render()
                if (!animacao.live) {
                    animacao.die(() => animacoes.splice(idx, 1))
                }
            })

            setTimeout(() => render(), 60);
        };


        Teclado.call(Gunslinger, WALLS, PIXEL);
        window.onload = render;

    </script>

</body>

</html>